# ADR: Генерация API-клиента

Статус: **Принято**

## Контекст

REST API описан в OpenAPI. Требуется быстро получать типобезопасный клиент и минимизировать расхождение между контрактом и реализацией. Ручное написание клиентов замедляет работу и повышает риск ошибок.

## Решение

- Использовать **Orval** для генерации клиентского кода по OpenAPI-спецификации.
- Генерировать типизированные функции/хелперы поверх `axios` (или `fetch`, при необходимости).
- Поддерживать сценарий автогенерации в `package.json` (скрипт `orval`), подключить в CI.

## Последствия

**Преимущества:**

- Скорость разработки: обновил спецификацию → получил готовые типы и вызовы.
- Снижение ошибок за счёт типобезопасности (TS) и синхронизации со спецификацией.
- Гибкость шаблонов: можно генерировать хуки/инстансы под проектные нужды.

**Недостатки:**

- Нужна дисциплина: **истина — в OpenAPI**; несинхронизированная спека ломает генерацию.
- Требуется поддержка пайплайна (скрипты, precommit/CI, кеш).
- Возможны ограничения генератора под нестандартные требования (понадобятся кастомные шаблоны).

## Альтернативы

- **openapi-typescript + ручной клиент** — больше контроля, но медленнее и больше рутины.
- **Swagger Codegen / OpenAPI Generator** — мощные, но тяжелее в настройке и кастомизации.
- **tRPC** — отлично для full-stack TS, но требует общего сервера и не подходит к готовому REST.
